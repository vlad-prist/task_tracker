# Трекер задач сотрудников
API приложение для создания и отслеживания загрузки сотрудников.
Приложение выполнено на фреймворке Django и Django REST framework.
PostgreSQL используется для сохранения данных.


## Использование
Для работы с данным проектом:

* Установите Git и Docker

* Клонировать репозиторий. https://github.com/vlad-prist/task_tracker.git

* В виртуальном окружении установите **requirements.txt** (пакет с зависимостями) с помощью команды:
```sh
$ pip install -r requirements.txt
```

* Добавьте в свой проект файл **.env** необходимыми для работы паролями.
Пример **.env.sample** размещен в проекте.
P.S. Добавлена переменная `ENVTYPE` которая необходима для определения переменной окружения для подключения к хосту.
в ***.env*** определен хост для подключения к PostgreSQL, ***env.docker*** - для подключения Docker-compose

* Запустите терминал и выполните команды: 
```sh
$ docker-compose build

$ docker-compose up
```

* Если требуется доступ к админке, выполните команду:
(Супер пользователь ***email="admin@admin.com"*** ***password="admin123456"***)
```sh
$ docker-compose exec app python manage.py csu 
```
или в терминале редактора исходного кода
```sh
$ python manage.py csu 
```

## Разработка

### Реализовано в проекте
В данном проекте реализовано два приложения:

`tracker` - основной проект /
`users` - для регистрации пользователей

В каждом по соответствующей модели.
Для моделей реализован контроллеры через ViewSet

**users**

Реализован класс User для дальнейшего определения пользователей сервиса.


**tracker**

***Структура базы данных***

* Таблица сотрудников;
* Таблица задач.

***Функциональность***

- [x] Реализованы стандартные операции CRUD (создания, чтения, обновления и удаления записей) для таблиц сотрудников
и задач.
- [x] Реализованы специальные эндпоинты:
    * Отображение занятых сотрудников: Запрашивается из БД список сотрудников и их задачи, 
отсортированный по количеству активных задач.
    * Важные задачи: Запрашивается из БД список задач, которые не взяты в работу, но от которых зависят другие задачи,
взятые в работу. В данном эндпоинте также реализуется поиск по сотрудникам, которые могут взять такие задачи,
и выводится списком объектов в формате: `{Важная задача, Срок, [ФИО сотрудника]}`.
- [x] Реализована валидация данных:
    * Запрет на создание задачи с указанием прошедшей дату дедлайна;
    * Запрет на создание задачи со статусом 'Просрочена';
    * Запрет на назначение или смены сотрудника в задаче со статусом 'Просрочена'.
- [x] Реализовано тестирование для всех основных функций платформы.
Запустить тест можно командой:
***python manage.py test имя_приложения.tests.имя_класс_теста.имя_функции_теста***

например:
```sh
$ python manage.py test tracker.tests.TaskTestCase.test_overdue_task

```
- [x] Покрытие тестами 91%
    * Проверить процент покрытия можно с помощью команды:

```sh
$ coverage run --source=tracker manage.py test tracker

$ coverage report
```
- [x] Проект завернут в Docker.

**Настройка и запуск Docker**

Для работы с Docker на компьютере должен быть установлен Docker и docker-compose.

Для запуска докера на локальном хосте необходимо выполнить команду:
```sh
docker-compose up -d --build
```


## Технические требования


1. **Язык программирования:**
    - Python 3.11
2. **Фреймворк:**
    - Django для реализации REST API с использованием Django REST Framework (DRF)
3. **База данных:**
    - PostgreSQL для хранения данных
4. **ORM:**
    - Django ORM для взаимодействия с базой данных
5. **Контейнеризация:**
    - Docker для контейнеризации приложения
6. **Документация:**
    - В корне проекта размещен файл README.md с описанием структуры проекта, инструкциями по установке и запуску, а также описанием API.
7. **Качество кода:**
    - Соблюдены стандарты PEP8 для Python кода.
8. **Автодокументация:**
    - Реализована автогенерируемая документация API с использованием Swagger и/или ReDoc.


## Источники


1. [Документация по фреймворку и библиотекам Django](https://django.fun/)
2. DRF - Сериализаторы. Документация - [Сериализаторы](https://ilyachch.gitbook.io/django-rest-framework-russian-documentation/overview/navigaciya-po-api/serializers)
3. Агрегация и аннотация. Хинт по использованию - [Агрегация аннотаций](https://djangodoc.ru/3.1/topics/db/aggregation/)
4. Агрегатные операции. Обучающий материал - [Агрегатные операции](https://metanit.com/python/django/5.17.php)
5. Настройка CORS. Официальная документация. - [django-cors-headers](https://pypi.org/project/django-cors-headers/)
6. Интерактивная документация API. Официальная документация - [drf-yasg](https://drf-yasg.readthedocs.io/en/stable/readme.html)
7. Docker - Инструкции по установке - [Docker Desktop on Windows](https://docs.docker.com/desktop/install/windows-install/)
8. Docker - Дополнительный справочный ресурс - [Docker Hub](https://hub.docker.com/)
9. Хинт для оформления README файла - [Базовый синтаксис записи и форматирования](https://docs.github.com/ru/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax)